#pragma once
#include <stdbool.h>
#include <stdio.h>
#include "about_module.h"
#include "hid_module.h"
#include "spam_module.h"
#include "trackers_module.h"
#include "z_switch_module.h"

#include "adv_scan_module.h"
#include "analyzer_scenes.h"
#include "catdos_module.h"
#include "deauth_module.h"
#include "detector_scenes.h"
#include "display_settings.h"
#include "drone_id_scenes.h"
#include "droneid_scanner.h"
#include "file_manager_module.h"
#include "gps_module.h"
#include "gps_screens.h"
#include "gps_settings.h"
#include "i2c_scanner.h"
#include "logs_output.h"
#include "open_thread_module.h"
#include "ota_module.h"
#include "sd_card_settings_module.h"
#include "settings_module.h"
#include "sleep_mode_scenes.h"
#include "ssid_spam.h"
#include "stealth_mode.h"
#include "warbee_module.h"
#include "wardriving_module.h"
#include "wardriving_screens_module.h"
#include "warthread_module.h"
#include "web_file_browser_module.h"
#include "wifi_analyzer.h"
#include "wifi_settings_scenes.h"
#include "zigbee_module.h"

typedef enum {
  MENU_MAIN = 0,
  MENU_APPLICATIONS,
  MENU_SETTINGS,
  MENU_ABOUT,
  /* Applications */
  MENU_WIFI_APPS,
  MENU_BLUETOOTH_APPS,
  MENU_ZIGBEE_APPS,
  MENU_THREAD_APPS,
  MENU_GPS,
  MENU_GPIO_APPS,
  /* WiFi applications */
  MENU_WIFI_ANALIZER,
  MENU_WIFI_DEAUTH,
  MENU_WIFI_DEAUTH_SCAN,
  MENU_WIFI_DOS,
  MENU_WIFI_SSID_SPAM,
  MENU_WIFI_ODRONE_ID,
  MENU_WIFI_ODRONE_SCANNER,
  /* WiFi analizer items */
  MENU_WIFI_ANALYZER_RUN,
  MENU_WIFI_ANALYZER_SETTINGS,
  MENU_WIFI_ANALYZER_HELP,
  /* WiFi analizer start items */
  MENU_WIFI_ANALYZER_ASK_SUMMARY,
  MENU_WIFI_ANALYZER_SUMMARY,
  /* WiFi analizer settings */
  MENU_WIFI_ANALYZER_CHANNEL,
  MENU_WIFI_ANALYZER_DESTINATION,
  MENU_WIFI_ANALYZER_SD_EREASE_WARNING,
  /* Bluetooth applications */
  MENU_BLUETOOTH_TRAKERS_SCAN,
  MENU_BLUETOOTH_SPAM,
  MENU_BLUETOOTH_HID,
  MENU_BLUETOOTH_ADV,
  /* Zigbee applications */
  MENU_ZIGBEE_SPOOFING,
  MENU_ZIGBEE_SWITCH,
  MENU_ZIGBEE_LIGHT,
  MENU_ZIGBEE_SNIFFER,
  /* Thread applications */
  MENU_THREAD_BROADCAST,
  MENU_THREAD_SNIFFER,
  /* Thread Sniffer App */
  MENU_THREAD_SNIFFER_RUN,
  /* GPS applications */
  MENU_GPS_WARDRIVING,
  MENU_GPS_DATE_TIME,
  MENU_GPS_LOCATION,
  MENU_GPS_SPEED,
  MENU_GPS_HELP,
  /* GPIO applications */
  MENU_GPIO_I2C_SCANNER,
  MENU_GPIO_UART_BRIDGE,
  /* Wardriving submenus */
  MENU_GPS_WARDRIVING_START,
  MENU_GPS_WARDRIVING_BEE_START,
  MENU_GPS_WARDRIVING_THREAD_START,
  MENU_GPS_WARDRIVING_HELP,
  /* About submenus */
  MENU_ABOUT_VERSION,
  MENU_ABOUT_LICENSE,
  MENU_ABOUT_CREDITS,
  MENU_ABOUT_LEGAL,
  MENU_ABOUT_UPDATE,
  /* Settings items */
  MENU_SETTINGS_DISPLAY,
  MENU_FILE_MANAGER,
  MENU_FILE_MANAGER_LOCAL,
  MENU_FILE_MANAGER_WEB,
  MENU_SETTINGS_SYSTEM,
  MENU_SETTINGS_LOGS_OUTPUT,
  MENU_SETTINGS_GPS,
  MENU_SETTINGS_WIFI,
  MENU_SETTINGS_SD_CARD,
  MENU_SETTINGS_SD_CARD_INFO,
  MENU_SETTINGS_SD_CARD_CHECK_FORMAT,
  MENU_SETTINGS_SD_CARD_FORMAT,
  MENU_STEALTH_MODE,
  MENU_SLEEP_MODE,
  /* Menu count */
  MENU_COUNT,  // Keep this at the end
} menu_idx_t;

typedef struct {
  menu_idx_t menu_idx;
  menu_idx_t parent_idx;
  const char* display_name;
  const char* entry_cmd;
  uint8_t last_selected_submenu;
  void* on_enter_cb;
  void* on_exit_cb;
  bool is_visible;
} menu_t;

typedef struct {
  menu_idx_t current_menu;
  menu_idx_t parent_menu_idx;
  uint8_t selected_submenu;
  uint8_t submenus_count;
  uint8_t menus_count;
  uint8_t** submenus_idx;
  bool input_lock;
} menus_manager_t;

menu_t menus[] = {  //////////////////////////////////
    {.display_name = "Must Not See This",
     .menu_idx = MENU_MAIN,
     .parent_idx = -1,
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = false},
    {.display_name = "Applications",
     .menu_idx = MENU_APPLICATIONS,
     .parent_idx = MENU_MAIN,
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Settings",
     .menu_idx = MENU_SETTINGS,
     .parent_idx = MENU_MAIN,
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "About",
     .menu_idx = MENU_ABOUT,
     .parent_idx = MENU_MAIN,
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Version",
     .menu_idx = MENU_ABOUT_VERSION,
     .parent_idx = MENU_ABOUT,
     .last_selected_submenu = 0,
     .on_enter_cb = about_module_display_version,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "License",
     .menu_idx = MENU_ABOUT_LICENSE,
     .parent_idx = MENU_ABOUT,
     .last_selected_submenu = 0,
     .on_enter_cb = about_module_display_license,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Credits",
     .menu_idx = MENU_ABOUT_CREDITS,
     .parent_idx = MENU_ABOUT,
     .last_selected_submenu = 0,
     .on_enter_cb = about_module_display_credits_menu,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Legal",
     .menu_idx = MENU_ABOUT_LEGAL,
     .parent_idx = MENU_ABOUT,
     .last_selected_submenu = 0,
     .on_enter_cb = about_module_display_legal_menu,
     .on_exit_cb = NULL,
     .is_visible = true},
#ifdef CONFIG_WIFI_APPS_ENABLE
    {.display_name = "WiFi",
     .menu_idx = MENU_WIFI_APPS,
     .parent_idx = MENU_APPLICATIONS,
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Analyzer",
     .menu_idx = MENU_WIFI_ANALIZER,
     .parent_idx = MENU_WIFI_APPS,
     .entry_cmd = "analyzer",
     .last_selected_submenu = 0,
     .on_enter_cb = analyzer_scenes_main_menu,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Deauth",
     .menu_idx = MENU_WIFI_DEAUTH,
     .parent_idx = MENU_WIFI_APPS,
     .entry_cmd = "deauth",
     .last_selected_submenu = 0,
     .on_enter_cb = deauth_module_begin,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Deauth Scan",
     .menu_idx = MENU_WIFI_DEAUTH_SCAN,
     .parent_idx = MENU_WIFI_APPS,
     .entry_cmd = "deauth_scan",
     .last_selected_submenu = 0,
     .on_enter_cb = detector_scenes_main_menu,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "DoS",
     .menu_idx = MENU_WIFI_DOS,
     .parent_idx = MENU_WIFI_APPS,
     .entry_cmd = "dos",
     .last_selected_submenu = 0,
     .on_enter_cb = catdos_module_begin,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "SSID Spammer",
     .menu_idx = MENU_WIFI_SSID_SPAM,
     .parent_idx = MENU_WIFI_APPS,
     .entry_cmd = "ssid_spam",
     .last_selected_submenu = 0,
     .on_enter_cb = ssid_spam_begin,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Drone ID",
     .menu_idx = MENU_WIFI_ODRONE_ID,
     .parent_idx = MENU_WIFI_APPS,
     .entry_cmd = "drone_id",
     .last_selected_submenu = 0,
     .on_enter_cb = drone_id_scenes_main,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "DroneID Scan",
     .menu_idx = MENU_WIFI_ODRONE_SCANNER,
     .parent_idx = MENU_WIFI_APPS,
     .entry_cmd = "droneid_scanner",
     .last_selected_submenu = 0,
     .on_enter_cb = droneid_scanner_begin,
     .on_exit_cb = NULL,
     .is_visible = true},
#endif
#ifdef CONFIG_BLUETOOTH_APPS_ENABLE
    {.display_name = "Bluetooth",
     .menu_idx = MENU_BLUETOOTH_APPS,
     .parent_idx = MENU_APPLICATIONS,
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Trakers scan",
     .menu_idx = MENU_BLUETOOTH_TRAKERS_SCAN,
     .parent_idx = MENU_BLUETOOTH_APPS,
     .entry_cmd = "trakers_scan",
     .last_selected_submenu = 0,
     .on_enter_cb = trackers_module_begin,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Spam",
     .menu_idx = MENU_BLUETOOTH_SPAM,
     .parent_idx = MENU_BLUETOOTH_APPS,
     .entry_cmd = "spam",
     .last_selected_submenu = 0,
     .on_enter_cb = ble_module_begin,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "HID",
     .menu_idx = MENU_BLUETOOTH_HID,
     .parent_idx = MENU_BLUETOOTH_APPS,
     .entry_cmd = "hid",
     .last_selected_submenu = 0,
     .on_enter_cb = hid_module_begin,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "ADV Scanner",
     .menu_idx = MENU_BLUETOOTH_ADV,
     .parent_idx = MENU_BLUETOOTH_APPS,
     .last_selected_submenu = 0,
     .on_enter_cb = adv_scanner_module_begin,
     .on_exit_cb = NULL,
     .is_visible = true},
#endif
#ifdef CONFIG_ZIGBEE_APPS_ENABLE
    {.display_name = "Zigbee",
     .menu_idx = MENU_ZIGBEE_APPS,
     .parent_idx = MENU_APPLICATIONS,
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Spoofing",
     .menu_idx = MENU_ZIGBEE_SPOOFING,
     .parent_idx = MENU_ZIGBEE_APPS,
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Switch",
     .menu_idx = MENU_ZIGBEE_SWITCH,
     .parent_idx = MENU_ZIGBEE_SPOOFING,
     .entry_cmd = "switch",
     .last_selected_submenu = 0,
     .on_enter_cb = zigbee_module_switch_enter,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Light",
     .menu_idx = MENU_ZIGBEE_LIGHT,
     .parent_idx = MENU_ZIGBEE_SPOOFING,
     .entry_cmd = "light",
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = false},
    {.display_name = "Sniffer",
     .menu_idx = MENU_ZIGBEE_SNIFFER,
     .parent_idx = MENU_ZIGBEE_APPS,
     .entry_cmd = "zigbee_sniffer",
     .last_selected_submenu = 0,
     .on_enter_cb = zigbee_module_sniffer_enter,
     .on_exit_cb = NULL,
     .is_visible = true},
#endif
#ifdef CONFIG_THREAD_APPS_ENABLE
    {.display_name = "Thread",
     .menu_idx = MENU_THREAD_APPS,
     .parent_idx = MENU_APPLICATIONS,
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Broadcast",
     .menu_idx = MENU_THREAD_BROADCAST,
     .parent_idx = MENU_THREAD_APPS,
     .entry_cmd = "broadcast",
     .last_selected_submenu = 0,
     .on_enter_cb = open_thread_module_broadcast_enter,
     .on_exit_cb = open_thread_module_exit,
     .is_visible = true},
    {.display_name = "Sniffer",
     .menu_idx = MENU_THREAD_SNIFFER,
     .parent_idx = MENU_THREAD_APPS,
     .entry_cmd = "thread_sniffer",
     .last_selected_submenu = 0,
     .on_enter_cb = open_thread_module_sniffer_enter,
     .on_exit_cb = open_thread_module_exit,
     .is_visible = true},
    {.display_name = "Run",
     .menu_idx = MENU_THREAD_SNIFFER_RUN,
     .parent_idx = MENU_THREAD_SNIFFER,
     .last_selected_submenu = 0,
     .on_enter_cb = open_thread_module_sniffer_run,
     .on_exit_cb = NULL,
     .is_visible = true},
#endif
#if CONFIG_GPS_APPS_ENABLE && CONFIG_GPS_ENABLED && CONFIG_SD_ENABLED
    {.display_name = "GPS",
     .menu_idx = MENU_GPS,
     .parent_idx = MENU_APPLICATIONS,
     .last_selected_submenu = 0,
     .on_enter_cb = gps_module_check_state,
     .on_exit_cb = gps_module_reset_state,
     .is_visible = true},
  #if CONFIG_WIFI_APPS_ENABLE || CONFIG_ZIGBEE_APPS_ENABLE || \
      CONFIG_THREAD_APPS_ENABLE
    {.display_name = "Wardriving",
     .menu_idx = MENU_GPS_WARDRIVING,
     .parent_idx = MENU_GPS,
     .entry_cmd = "gps_wardriving",
     .last_selected_submenu = 0,
     .on_enter_cb = wardriving_module_begin,
     .on_exit_cb = wardriving_module_end,
     .is_visible = true},
    #if CONFIG_WIFI_APPS_ENABLE
    {.display_name = "AP Start",
     .menu_idx = MENU_GPS_WARDRIVING_START,
     .parent_idx = MENU_GPS_WARDRIVING,
     .last_selected_submenu = 0,
     .on_enter_cb = wardriving_module_start_scan,
     .on_exit_cb = wardriving_module_stop_scan,
     .is_visible = true},
    #endif
    #ifdef CONFIG_ZIGBEE_APPS_ENABLE
    {.display_name = "Zigbee Start",
     .menu_idx = MENU_GPS_WARDRIVING_BEE_START,
     .parent_idx = MENU_GPS_WARDRIVING,
     .last_selected_submenu = 0,
     .on_enter_cb = warbee_module_begin,
     .on_exit_cb = warbee_module_exit,
     .is_visible = true},
    #endif
    #ifdef CONFIG_THREAD_APPS_ENABLE
    {.display_name = "Thread Start",
     .menu_idx = MENU_GPS_WARDRIVING_THREAD_START,
     .parent_idx = MENU_GPS_WARDRIVING,
     .last_selected_submenu = 0,
     .on_enter_cb = warthread_module_begin,
     .on_exit_cb = warthread_module_exit,
     .is_visible = true},
    #endif
    {.display_name = "Help",
     .menu_idx = MENU_GPS_WARDRIVING_HELP,
     .parent_idx = MENU_GPS_WARDRIVING,
     .last_selected_submenu = 0,
     .on_enter_cb = wardriving_screens_show_help,
     .on_exit_cb = NULL,
     .is_visible = true},
  #endif
    {.display_name = "Date & Time",
     .menu_idx = MENU_GPS_DATE_TIME,
     .parent_idx = MENU_GPS,
     .last_selected_submenu = 0,
     .on_enter_cb = gps_module_general_data_run,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Location",
     .menu_idx = MENU_GPS_LOCATION,
     .parent_idx = MENU_GPS,
     .last_selected_submenu = 0,
     .on_enter_cb = gps_module_general_data_run,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Speed",
     .menu_idx = MENU_GPS_SPEED,
     .parent_idx = MENU_GPS,
     .last_selected_submenu = 0,
     .on_enter_cb = gps_module_general_data_run,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Help",
     .menu_idx = MENU_GPS_HELP,
     .parent_idx = MENU_GPS,
     .last_selected_submenu = 0,
     .on_enter_cb = gps_screens_show_help,
     .on_exit_cb = NULL,
     .is_visible = true},
#endif
#ifdef CONFIG_GPIO_APPS_ENABLE
    {.display_name = "GPIO",
     .menu_idx = MENU_GPIO_APPS,
     .parent_idx = MENU_APPLICATIONS,
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "I2C Scanner",
     .menu_idx = MENU_GPIO_I2C_SCANNER,
     .parent_idx = MENU_GPIO_APPS,
     .entry_cmd = "i2c_scanner",
     .last_selected_submenu = 0,
     .on_enter_cb = i2c_scanner_begin,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "UART Bridge",
     .menu_idx = MENU_GPIO_UART_BRIDGE,
     .parent_idx = MENU_GPIO_APPS,
     .entry_cmd = "uart_bridge",
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
#endif
#ifdef CONFIG_FILE_MANAGER_ENABLE
    {.display_name = "File Manager",
     .menu_idx = MENU_FILE_MANAGER,
     .parent_idx = MENU_APPLICATIONS,
     .entry_cmd = "file_manager",
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
  #ifdef CONFIG_FILE_MANAGER_LOCAL
    {.display_name = "Local",
     .menu_idx = MENU_FILE_MANAGER_LOCAL,
     .parent_idx = MENU_FILE_MANAGER,
     .last_selected_submenu = 0,
     .on_enter_cb = file_manager_module_init,
     .on_exit_cb = NULL,
     .is_visible = true},
  #endif
  #ifdef CONFIG_FILE_MANAGER_WEB
    {.display_name = "Web",
     .menu_idx = MENU_FILE_MANAGER_WEB,
     .parent_idx = MENU_FILE_MANAGER,
     .last_selected_submenu = 0,
     .on_enter_cb = web_file_browser_module_begin,
     .on_exit_cb = NULL,
     .is_visible = true},
  #endif
#endif
#ifdef CONFIG_OTA_ENABLE
    {.display_name = "Update",
     .menu_idx = MENU_ABOUT_UPDATE,
     .parent_idx = MENU_ABOUT,
     .entry_cmd = "ota",
     .last_selected_submenu = 0,
     .on_enter_cb = ota_module_init,
     .on_exit_cb = NULL,
     .is_visible = true},
#endif
    {.display_name = "Display",
     .menu_idx = MENU_SETTINGS_DISPLAY,
     .parent_idx = MENU_SETTINGS,
     .last_selected_submenu = 0,
     .on_enter_cb = display_config_module_begin,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "System",
     .menu_idx = MENU_SETTINGS_SYSTEM,
     .parent_idx = MENU_SETTINGS,
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Logs Output",
     .menu_idx = MENU_SETTINGS_LOGS_OUTPUT,
     .parent_idx = MENU_SETTINGS_SYSTEM,
     .last_selected_submenu = 0,
     .on_enter_cb = logs_output,
     .on_exit_cb = NULL,
     .is_visible = true},
#if CONFIG_GPS_APPS_ENABLE && CONFIG_GPS_ENABLED
    {.display_name = "GPS",
     .menu_idx = MENU_SETTINGS_GPS,
     .parent_idx = MENU_SETTINGS_SYSTEM,
     .last_selected_submenu = 0,
     .on_enter_cb = gps_settings_main_menu,
     .on_exit_cb = NULL,
     .is_visible = true},
#endif
#if CONFIG_SD_ENABLED
    {.display_name = "SD card",
     .menu_idx = MENU_SETTINGS_SD_CARD,
     .parent_idx = MENU_SETTINGS_SYSTEM,
     .last_selected_submenu = 0,
     .on_enter_cb = NULL,
     .on_exit_cb = NULL,
     .is_visible = true},
#endif
    {.display_name = "WiFi",
     .menu_idx = MENU_SETTINGS_WIFI,
     .parent_idx = MENU_SETTINGS_SYSTEM,
     .last_selected_submenu = 0,
     .on_enter_cb = wifi_settings_scenes_main,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Info",
     .menu_idx = MENU_SETTINGS_SD_CARD_INFO,
     .parent_idx = MENU_SETTINGS_SD_CARD,
     .last_selected_submenu = 0,
     .on_enter_cb = update_sd_card_info,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Check Format",
     .menu_idx = MENU_SETTINGS_SD_CARD_CHECK_FORMAT,
     .parent_idx = MENU_SETTINGS_SD_CARD,
     .last_selected_submenu = 0,
     .on_enter_cb = sd_card_settings_verify_sd_card,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Format",
     .menu_idx = MENU_SETTINGS_SD_CARD_FORMAT,
     .parent_idx = MENU_SETTINGS_SD_CARD,
     .last_selected_submenu = 0,
     .on_enter_cb = sd_card_settings_verify_sd_card,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Stealth Mode",
     .menu_idx = MENU_STEALTH_MODE,
     .parent_idx = MENU_SETTINGS,
     .last_selected_submenu = 0,
     .on_enter_cb = stealth_mode_open_menu,
     .on_exit_cb = NULL,
     .is_visible = true},
    {.display_name = "Sleep Mode",
     .menu_idx = MENU_SLEEP_MODE,
     .parent_idx = MENU_SETTINGS,
     .last_selected_submenu = 0,
     .on_enter_cb = sleep_mode_scenes_main,
     .on_exit_cb = NULL,
     .is_visible = true}};